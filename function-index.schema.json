{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://base-ai-project.com/schemas/function-index.json","title":"Function Index Schema","description":"Schema for Function Index System - comprehensive function registry and dependency tracking","type":"object","required":["version","metadata","functions","validation","tracking","config"],"properties":{"$schema":{"type":"string","description":"JSON Schema reference"},"title":{"type":"string","description":"Human-readable title"},"description":{"type":"string","description":"System description"},"version":{"type":"string","pattern":"^\\d+\\.\\d+\\.\\d+$","description":"Semantic version of the index"},"lastUpdated":{"type":"string","format":"date-time","description":"ISO 8601 timestamp of last update"},"metadata":{"type":"object","required":["projectName","indexLocation","rulesLocation"],"properties":{"projectName":{"type":"string","description":"Name of the project"},"indexLocation":{"type":"string","description":"Relative path to this index file"},"rulesLocation":{"type":"string","description":"Path to function index system rules"},"autoSync":{"type":"boolean","description":"Enable automatic synchronization"},"trackingEnabled":{"type":"boolean","description":"Enable function tracking"}}},"functions":{"type":"object","required":["registry","dependencies","callers","modifications"],"properties":{"registry":{"type":"object","patternProperties":{"^[a-zA-Z_][a-zA-Z0-9_]*$":{"type":"object","required":["name","signature","location","language"],"properties":{"name":{"type":"string","description":"Function name"},"signature":{"type":"string","description":"Complete function signature"},"location":{"type":"object","required":["file","line","column"],"properties":{"file":{"type":"string","description":"Relative file path"},"line":{"type":"integer","minimum":1,"description":"Line number"},"column":{"type":"integer","minimum":1,"description":"Column number"}}},"language":{"type":"string","enum":["javascript","typescript","python","java","kotlin","swift","go","rust"],"description":"Programming language"},"parameters":{"type":"array","items":{"type":"object","required":["name","type"],"properties":{"name":{"type":"string","description":"Parameter name"},"type":{"type":"string","description":"Parameter type"},"optional":{"type":"boolean","description":"Is parameter optional"},"defaultValue":{"description":"Default parameter value"}}}},"returnType":{"type":"string","description":"Return type"},"purpose":{"type":"string","description":"Function purpose description"},"tags":{"type":"array","items":{"type":"string"},"description":"Function tags for categorization"},"complexity":{"type":"string","enum":["low","medium","high","critical"],"description":"Function complexity level"},"lastModified":{"type":"string","format":"date-time","description":"Last modification timestamp"},"hash":{"type":"string","description":"Function content hash for change detection"}}}}},"dependencies":{"type":"object","patternProperties":{"^[a-zA-Z_][a-zA-Z0-9_]*$":{"type":"array","items":{"type":"string"},"description":"List of functions this function depends on"}}},"callers":{"type":"object","patternProperties":{"^[a-zA-Z_][a-zA-Z0-9_]*$":{"type":"array","items":{"type":"object","required":["function","file","line"],"properties":{"function":{"type":"string","description":"Calling function name"},"file":{"type":"string","description":"File containing the call"},"line":{"type":"integer","minimum":1,"description":"Line number of the call"},"context":{"type":"string","description":"Call context or purpose"}}},"description":"Functions that call this function"}}},"modifications":{"type":"object","patternProperties":{"^[a-zA-Z_][a-zA-Z0-9_]*$":{"type":"array","items":{"type":"object","required":["timestamp","type","description"],"properties":{"timestamp":{"type":"string","format":"date-time","description":"Modification timestamp"},"type":{"type":"string","enum":["created","modified","deleted","moved","renamed"],"description":"Type of modification"},"description":{"type":"string","description":"Description of the change"},"impact":{"type":"array","items":{"type":"string"},"description":"List of affected functions"},"author":{"type":"string","description":"Author of the change"}}},"description":"Modification history for this function"}}}}},"validation":{"type":"object","required":["enabled","rules","lastCheck"],"properties":{"enabled":{"type":"boolean","description":"Enable validation system"},"rules":{"type":"object","properties":{"signatureCheck":{"type":"boolean","description":"Validate function signatures"},"dependencyCheck":{"type":"boolean","description":"Validate dependencies exist"},"callerCheck":{"type":"boolean","description":"Validate caller relationships"},"duplicateCheck":{"type":"boolean","description":"Check for duplicate functions"},"orphanCheck":{"type":"boolean","description":"Check for orphaned functions"}}},"lastCheck":{"type":"string","format":"date-time","description":"Last validation timestamp"},"errors":{"type":"array","items":{"type":"object","required":["type","function","message"],"properties":{"type":{"type":"string","enum":["signature","dependency","caller","duplicate","orphan"],"description":"Error type"},"function":{"type":"string","description":"Function with error"},"message":{"type":"string","description":"Error message"},"severity":{"type":"string","enum":["low","medium","high","critical"],"description":"Error severity"}}},"description":"Validation errors"}}},"tracking":{"type":"object","required":["enabled","scanPaths","excludePaths"],"properties":{"enabled":{"type":"boolean","description":"Enable function tracking"},"scanPaths":{"type":"array","items":{"type":"string"},"description":"Paths to scan for functions"},"excludePaths":{"type":"array","items":{"type":"string"},"description":"Paths to exclude from scanning"},"fileTypes":{"type":"array","items":{"type":"string"},"description":"File extensions to scan"},"lastScan":{"type":"string","format":"date-time","description":"Last scan timestamp"},"scanStats":{"type":"object","properties":{"filesScanned":{"type":"integer","minimum":0,"description":"Number of files scanned"},"functionsFound":{"type":"integer","minimum":0,"description":"Number of functions found"},"scanDuration":{"type":"number","minimum":0,"description":"Scan duration in seconds"}}}}},"config":{"type":"object","required":["autoUpdate","syncInterval"],"properties":{"autoUpdate":{"type":"boolean","description":"Enable automatic updates"},"syncInterval":{"type":"integer","minimum":1,"description":"Sync interval in minutes"},"maxHistory":{"type":"integer","minimum":1,"description":"Maximum history entries to keep"},"compressionEnabled":{"type":"boolean","description":"Enable data compression"},"backupEnabled":{"type":"boolean","description":"Enable automatic backups"},"notificationLevel":{"type":"string","enum":["none","errors","warnings","info","debug"],"description":"Notification level"},"integrations":{"type":"object","properties":{"aiSystemSync":{"type":"boolean","description":"Sync with .ai-system rules"},"testFramework":{"type":"boolean","description":"Integration with test framework"},"linter":{"type":"boolean","description":"Integration with linter"},"ide":{"type":"boolean","description":"IDE integration enabled"}}}}}}}